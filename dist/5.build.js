webpackJsonp([5],{219:function(e,t,a){"use strict";function o(e){a(237)}Object.defineProperty(t,"__esModule",{value:!0});var r=a(226),l=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);var s=a(239),n=a(31),m=o,d=n(l.a,s.a,!1,m,"data-v-1eb090c8",null);t.default=d.exports},226:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(89);t.default={data:function(){return{filters:{name:""},addFormVisible:!1,addLoading:!1,loading:!1,addFormRules:{name:[{required:!0,message:"请输入任务名称",trigger:"blur"}],group:[{required:!0,message:"请选择任务集群",trigger:"blur"}],cron:[{required:!0,message:"请输入Cron表达式",trigger:"blur"}],status:[{required:!0,message:"请选择任务状态",trigger:"blur"}],target:[{required:!0,message:"请输入目标任务",trigger:"blur"}]},addForm:{name:"",group:"",cron:"",target:"",status:"",params:"",mobile:"",remark:""},editFormVisible:!1,editLoading:!1,editFormRules:{name:[{required:!0,message:"请输入任务名称",trigger:"blur"}],group:[{required:!0,message:"请选择任务集群",trigger:"blur"}],cron:[{required:!0,message:"请输入Cron表达式",trigger:"blur"}],status:[{required:!0,message:"请选择任务状态",trigger:"blur"}],target:[{required:!0,message:"请输入目标任务",trigger:"blur"}]},editForm:{id:"",name:"",group:"",cron:"",target:"",status:"",params:"",mobile:"",remark:""},viewForm:{},viewFormVisible:!1,jobs:[],groups:[],status:[{name:"启用",value:1},{name:"关闭",value:2}]}},methods:{handleManual:function(e,t){var a=this;this.$confirm("确认要立即此任务吗？","友情提示",{}).then(function(){var e={id:t.id};(0,o.jobExecute)(e).then(function(e){a.$message({message:"手动执行任务请求已提交",type:"success"})})})},handleView:function(e,t){this.viewForm=Object.assign({},t),this.viewFormVisible=!0},handleEdit:function(e,t){this.editForm=Object.assign({},t),this.editFormVisible=!0},handleDelete:function(e,t){var a=this;this.$confirm("确认要删除此任务配置信息吗？","友情提示",{}).then(function(){a.addLoading=!0;var e={id:t.id};(0,o.jobDelete)(e).then(function(e){a.addLoading=!1,0==e.code?(a.$message({message:"删除成功",type:"success"}),a.getJobList()):a.$message({message:e.message,type:"error"})})})},addSubmit:function(){var e=this;this.$refs.addForm.validate(function(t){t&&e.$confirm("确认要新增此任务配置信息吗？","友情提示",{}).then(function(){e.addLoading=!0;var t=Object.assign({},e.addForm);(0,o.jobAdd)(t).then(function(t){e.addLoading=!1,e.$message({message:"添加成功",type:"success"}),e.$refs.addForm.resetFields(),e.addFormVisible=!1,e.getJobList()}).catch(function(t){e.addLoading=!1})})})},editSubmit:function(){var e=this;this.$refs.editForm.validate(function(t){t&&e.$confirm("确认要修改此任务配置信息吗？","友情提示",{}).then(function(){e.editLoading=!0;var t=Object.assign({},e.editForm);(0,o.jobEdit)(t).then(function(t){e.editLoading=!1,e.$message({message:"修改成功",type:"success"}),e.$refs.editForm.resetFields(),e.editFormVisible=!1,e.getJobList()}).catch(function(t){e.editLoading=!1})})})},openAddJob:function(){this.addFormVisible=!0},getJobList:function(){var e=this,t={name:this.filters.name};this.loading=!0,(0,o.jobConfList)(t).then(function(t){e.loading=!1,e.jobs=t.data})},groupList:function(){var e=this,t={};(0,o.groupConfList)(t).then(function(t){e.groups=t.data})}},mounted:function(){this.getJobList(),this.groupList()}}},237:function(e,t,a){var o=a(238);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a(18)("737be7e1",o,!0,{})},238:function(e,t,a){t=e.exports=a(17)(!1),t.push([e.i,"",""])},239:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("任务配置")]),e._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.openAddJob}},[e._v("新增任务")])],1),e._v(" "),a("div",{staticClass:"text item"},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:e.filters}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入任务配置id...."},model:{value:e.filters.id,callback:function(t){e.$set(e.filters,"id",t)},expression:"filters.id"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.getJobList}},[e._v("查询")])],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.jobs,"highlight-current-row":"",stripe:""}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"200",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"任务名称",width:"250"}}),e._v(" "),a("el-table-column",{attrs:{prop:"group",label:"任务集群",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cron",label:"Cron表达式",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?a("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("启用")]):2==t.row.status?a("el-tag",{attrs:{type:"danger",size:"mini"}},[e._v("关闭")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"target",label:"target",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"320",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){return e.handleManual(t.$index,t.row)}}},[e._v("立即执行")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleView(t.$index,t.row)}}},[e._v("详情")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)]),e._v(" "),a("el-dialog",{attrs:{title:"新增任务",visible:e.addFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addFormVisible=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"100px",rules:e.addFormRules}},[a("el-form-item",{attrs:{label:"任务名称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:"15"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"任务集群",prop:"group"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择任务集群"},model:{value:e.addForm.group,callback:function(t){e.$set(e.addForm,"group",t)},expression:"addForm.group"}},e._l(e.groups,function(e){return a("el-option",{key:e.name,attrs:{label:e.remark,value:e.name}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Cron表达式",prop:"cron"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入Cron表达式"},model:{value:e.addForm.cron,callback:function(t){e.$set(e.addForm,"cron",t)},expression:"addForm.cron"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择任务状态"},model:{value:e.addForm.status,callback:function(t){e.$set(e.addForm,"status",t)},expression:"addForm.status"}},e._l(e.status,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"目标任务",prop:"target"}},[a("el-input",{attrs:{placeholder:"请输入目标任务","auto-complete":"off"},model:{value:e.addForm.target,callback:function(t){e.$set(e.addForm,"target",t)},expression:"addForm.target"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"任务参数",prop:"params"}},[a("el-input",{attrs:{placeholder:"请输入任务参数","auto-complete":"off"},model:{value:e.addForm.params,callback:function(t){e.$set(e.addForm,"params",t)},expression:"addForm.params"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号码",prop:"mobile"}},[a("el-input",{attrs:{placeholder:"请输入手机号码","auto-complete":"off"},model:{value:e.addForm.mobile,callback:function(t){e.$set(e.addForm,"mobile",t)},expression:"addForm.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{placeholder:"请输入任务备注","auto-complete":"off"},model:{value:e.addForm.remark,callback:function(t){e.$set(e.addForm,"remark",t)},expression:"addForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.addFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.addLoading},nativeOn:{click:function(t){return e.addSubmit(t)}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改任务",visible:e.editFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editFormVisible=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"100px",rules:e.editFormRules}},[a("el-form-item",{attrs:{label:"任务名称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:"15"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"任务集群",prop:"group"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择任务集群",disabled:""},model:{value:e.editForm.group,callback:function(t){e.$set(e.editForm,"group",t)},expression:"editForm.group"}},e._l(e.groups,function(e){return a("el-option",{key:e.name,attrs:{label:e.remark,value:e.name}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Cron表达式",prop:"cron"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入Cron表达式"},model:{value:e.editForm.cron,callback:function(t){e.$set(e.editForm,"cron",t)},expression:"editForm.cron"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择任务状态"},model:{value:e.editForm.status,callback:function(t){e.$set(e.editForm,"status",t)},expression:"editForm.status"}},e._l(e.status,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"目标任务",prop:"target"}},[a("el-input",{attrs:{placeholder:"请输入目标任务","auto-complete":"off"},model:{value:e.editForm.target,callback:function(t){e.$set(e.editForm,"target",t)},expression:"editForm.target"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"任务参数",prop:"params"}},[a("el-input",{attrs:{placeholder:"请输入任务参数","auto-complete":"off"},model:{value:e.editForm.params,callback:function(t){e.$set(e.editForm,"params",t)},expression:"editForm.params"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号码",prop:"mobile"}},[a("el-input",{attrs:{placeholder:"请输入手机号码","auto-complete":"off"},model:{value:e.editForm.mobile,callback:function(t){e.$set(e.editForm,"mobile",t)},expression:"editForm.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{placeholder:"请输入任务备注","auto-complete":"off"},model:{value:e.editForm.remark,callback:function(t){e.$set(e.editForm,"remark",t)},expression:"editForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.editFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.editSubmit(t)}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"查看任务",visible:e.viewFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.viewFormVisible=t}}},[a("el-form",{ref:"viewForm",attrs:{model:e.viewForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"任务名称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:""},model:{value:e.viewForm.name,callback:function(t){e.$set(e.viewForm,"name",t)},expression:"viewForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"任务集群",prop:"group"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择任务集群",disabled:""},model:{value:e.viewForm.group,callback:function(t){e.$set(e.viewForm,"group",t)},expression:"viewForm.group"}},e._l(e.groups,function(e){return a("el-option",{key:e.name,attrs:{label:e.remark,value:e.name}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Cron表达式",prop:"cron"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入Cron表达式",disabled:""},model:{value:e.viewForm.cron,callback:function(t){e.$set(e.viewForm,"cron",t)},expression:"viewForm.cron"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择任务状态",disabled:""},model:{value:e.viewForm.status,callback:function(t){e.$set(e.viewForm,"status",t)},expression:"viewForm.status"}},e._l(e.status,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"目标任务",prop:"target"}},[a("el-input",{attrs:{placeholder:"请输入目标任务","auto-complete":"off",disabled:""},model:{value:e.viewForm.target,callback:function(t){e.$set(e.viewForm,"target",t)},expression:"viewForm.target"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"任务参数",prop:"params"}},[a("el-input",{attrs:{placeholder:"请输入任务参数","auto-complete":"off",disabled:""},model:{value:e.viewForm.params,callback:function(t){e.$set(e.viewForm,"params",t)},expression:"viewForm.params"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号码",prop:"mobile"}},[a("el-input",{attrs:{placeholder:"请输入手机号码","auto-complete":"off",disabled:""},model:{value:e.viewForm.mobile,callback:function(t){e.$set(e.viewForm,"mobile",t)},expression:"viewForm.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{placeholder:"请输入任务备注","auto-complete":"off",disabled:""},model:{value:e.viewForm.remark,callback:function(t){e.$set(e.viewForm,"remark",t)},expression:"viewForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.viewFormVisible=!1}}},[e._v("关闭")])],1)],1)],1)},r=[],l={render:o,staticRenderFns:r};t.a=l}});