webpackJsonp([5],{224:function(e,t,i){"use strict";function a(e){i(287)}Object.defineProperty(t,"__esModule",{value:!0});var l=i(238),s=i.n(l);for(var r in l)"default"!==r&&function(e){i.d(t,e,function(){return l[e]})}(r);var o=i(289),n=i(31),m=a,c=n(s.a,o.a,!1,m,"data-v-2adc9445",null);t.default=c.exports},238:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(89);t.default={data:function(){return{filters:{id:"",group:"",ip:""},status:[{name:"EXECUTING",value:1},{name:"COMPLETE",value:2},{name:"UNKNOWN",value:3},{name:"ERROR",value:-1}],groups:{},total:0,page:1,pageSize:20,loading:!1,viewForm:{},viewFormVisible:!1,viewClientFormVisible:!1,snapshots:[],clients:[]}},methods:{handleSizeChange:function(e){this.pageSize=e,this.getSnapshots()},handleCurrentChange:function(e){this.page=e,this.getSnapshots()},handleView:function(e,t){this.viewForm=Object.assign({},t),this.viewFormVisible=!0},handleRetry:function(e,t){var i=this;this.$confirm("确认要重试此任务吗？","友情提示",{}).then(function(){(0,a.executeSnapshotRetry)(t.id).then(function(e){i.$message({message:"已经开始重试",type:"success"}),i.getSnapshots()})})},handleDelete:function(e,t){var i=this;this.$confirm("确认要删除此任务快照信息吗？","友情提示",{}).then(function(){var e=Object.assign({},t);(0,a.snapshotDelete)(e).then(function(e){i.$message({message:"删除成功",type:"success"}),i.getSnapshots()})})},getSnapshots:function(){var e=this,t=Object.assign({pageNo:this.page,pageSize:this.pageSize},this.filters);this.loading=!0,(0,a.executeSnapshotList)(t).then(function(t){e.loading=!1,e.snapshots=t.data.list,e.total=t.data.totalCount})},groupList:function(){var e=this,t={};(0,a.groupConfList)(t).then(function(t){e.groups=t.data})}},mounted:function(){this.getSnapshots(),this.groupList()}}},287:function(e,t,i){var a=i(288);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(18)("fda38fd6",a,!0,{})},288:function(e,t,i){t=e.exports=i(17)(!1),t.push([e.i,"",""])},289:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[e._v("任务快照列表")])]),e._v(" "),i("div",{staticClass:"text item"},[i("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[i("el-form",{attrs:{inline:!0,model:e.filters}},[i("el-form-item",[i("el-input",{attrs:{placeholder:"请输入执行快照id"},model:{value:e.filters.id,callback:function(t){e.$set(e.filters,"id",t)},expression:"filters.id"}})],1),e._v(" "),i("el-form-item",[i("el-input",{attrs:{placeholder:"请输入任务名称"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),e._v(" "),i("el-form-item",[i("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择执行状态"},model:{value:e.filters.status,callback:function(t){e.$set(e.filters,"status",t)},expression:"filters.status"}},e._l(e.status,function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1)],1),e._v(" "),i("el-form-item",[i("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择任务集群"},model:{value:e.filters.group,callback:function(t){e.$set(e.filters,"group",t)},expression:"filters.group"}},e._l(e.groups,function(e){return i("el-option",{key:e.name,attrs:{label:e.remark,value:e.name}})}),1)],1),e._v(" "),i("el-form-item",[i("el-input",{attrs:{placeholder:"请输入ip"},model:{value:e.filters.ip,callback:function(t){e.$set(e.filters,"ip",t)},expression:"filters.ip"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.getSnapshots}},[e._v("查询")])],1)],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.snapshots,"highlight-current-row":"",stripe:""}},[i("el-table-column",{attrs:{prop:"id",label:"id",width:"200",fixed:""}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"任务名称",width:"200"}}),e._v(" "),i("el-table-column",{attrs:{prop:"group",label:"任务集群",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{prop:"cron",label:"Cron表达式",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{prop:"ip",label:"ip",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{prop:"status",label:"执行状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?i("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("EXECUTING")]):2==t.row.status?i("el-tag",{attrs:{type:"primary",size:"mini"}},[e._v("COMPLETE")]):-1==t.row.status?i("el-tag",{attrs:{type:"danger",size:"mini"}},[e._v("ERROR")]):3==t.row.status?i("el-tag",{attrs:{type:"warning",size:"mini"}},[e._v("UNKNOWN")]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"耗时",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{attrs:{type:"danger",size:"mini"}},[e._v(e._s(t.row.times)+"秒")])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"target",label:"Target",width:"250"}}),e._v(" "),i("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"200"}}),e._v(" "),i("el-table-column",{attrs:{prop:"startTime",label:"开始时间",width:"200"}}),e._v(" "),i("el-table-column",{attrs:{prop:"finishTime",label:"结束时间",width:"200"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"100",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){return e.handleView(t.$index,t.row)}}},[e._v("详情")]),e._v(" "),1==t.row.canRetry?i("el-button",{staticStyle:{"margin-left":"0"},attrs:{size:"mini",type:"warning"},on:{click:function(i){return e.handleRetry(t.$index,t.row)}}},[e._v("重试")]):e._e()]}}])})],1),e._v(" "),i("el-col",{staticClass:"toolbar",attrs:{span:24}},[i("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"total,sizes,prev, pager, next","page-size":e.pageSize,"page-sizes":[20,30,50,100],total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)]),e._v(" "),i("el-dialog",{attrs:{title:"任务快照详情",visible:e.viewFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.viewFormVisible=t}}},[i("el-form",{ref:"viewForm",attrs:{model:e.viewForm,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"快照Id",prop:"id"}},[i("el-input",{attrs:{disabled:""},model:{value:e.viewForm.id,callback:function(t){e.$set(e.viewForm,"id",t)},expression:"viewForm.id"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"任务Id",prop:"jobId"}},[i("el-input",{attrs:{disabled:""},model:{value:e.viewForm.jobId,callback:function(t){e.$set(e.viewForm,"jobId",t)},expression:"viewForm.jobId"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"任务名称",prop:"name"}},[i("el-input",{attrs:{disabled:""},model:{value:e.viewForm.name,callback:function(t){e.$set(e.viewForm,"name",t)},expression:"viewForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"任务集群",prop:"group"}},[i("el-input",{attrs:{disabled:""},model:{value:e.viewForm.group,callback:function(t){e.$set(e.viewForm,"group",t)},expression:"viewForm.group"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"Cron表达式",prop:"cron"}},[i("el-input",{attrs:{disabled:""},model:{value:e.viewForm.cron,callback:function(t){e.$set(e.viewForm,"cron",t)},expression:"viewForm.cron"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"ip",prop:"cron"}},[i("el-input",{attrs:{disabled:""},model:{value:e.viewForm.ip,callback:function(t){e.$set(e.viewForm,"ip",t)},expression:"viewForm.ip"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"目标任务",prop:"target"}},[i("el-input",{attrs:{disabled:""},model:{value:e.viewForm.target,callback:function(t){e.$set(e.viewForm,"target",t)},expression:"viewForm.target"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"任务参数",prop:"params"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:20},disabled:""},model:{value:e.viewForm.params,callback:function(t){e.$set(e.viewForm,"params",t)},expression:"viewForm.params"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"创建时间",prop:"createTime"}},[i("el-input",{attrs:{disabled:""},model:{value:e.viewForm.createTime,callback:function(t){e.$set(e.viewForm,"createTime",t)},expression:"viewForm.createTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"手机号码",prop:"mobile"}},[i("el-input",{attrs:{disabled:""},model:{value:e.viewForm.mobile,callback:function(t){e.$set(e.viewForm,"mobile",t)},expression:"viewForm.mobile"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"状态",prop:"status"}},[i("el-input",{attrs:{disabled:""},model:{value:e.viewForm.status,callback:function(t){e.$set(e.viewForm,"status",t)},expression:"viewForm.status"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"耗时",prop:"times"}},[i("el-input",{attrs:{disabled:""},model:{value:e.viewForm.times,callback:function(t){e.$set(e.viewForm,"times",t)},expression:"viewForm.times"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"创建时间",prop:"createTime"}},[i("el-input",{attrs:{disabled:""},model:{value:e.viewForm.createTime,callback:function(t){e.$set(e.viewForm,"createTime",t)},expression:"viewForm.createTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"开始时间",prop:"startTime"}},[i("el-input",{attrs:{disabled:""},model:{value:e.viewForm.startTime,callback:function(t){e.$set(e.viewForm,"startTime",t)},expression:"viewForm.startTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"完成时间",prop:"finishTime"}},[i("el-input",{attrs:{disabled:""},model:{value:e.viewForm.finishTime,callback:function(t){e.$set(e.viewForm,"finishTime",t)},expression:"viewForm.finishTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"备注",prop:"remark"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:20},disabled:""},model:{value:e.viewForm.remark,callback:function(t){e.$set(e.viewForm,"remark",t)},expression:"viewForm.remark"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"结果",prop:"result"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:20},disabled:""},model:{value:e.viewForm.result,callback:function(t){e.$set(e.viewForm,"result",t)},expression:"viewForm.result"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(t){e.viewFormVisible=!1}}},[e._v("关闭")])],1)],1)],1)},l=[],s={render:a,staticRenderFns:l};t.a=s}});